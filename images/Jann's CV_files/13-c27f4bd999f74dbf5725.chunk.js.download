(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1405:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1405},1607:function(e,t){},1609:function(e,t){},1610:function(e,t){},1611:function(e,t){},1612:function(e,t){},1648:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),i=n(0),o=n.n(i),s=n(2),c=n.n(s),u=n(27),d=n(163),p=n(224),h=n(218),g=n(95),f=n(1603),P=n.n(f),l=n(674),v=n(1619),m=n.n(v);P.a.GlobalWorkerOptions.workerSrc=m.a;var w=window.devicePixelRatio,y=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).state={pdf:null,currentPage:1,canvasWidth:900,lastRenderedWidth:900,activeLayer:"primary"},t.listener=function(e){t.renderPdf()},t.renderPdf=function(){var e,n,r,i,o,s,c;return a.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e=t.props,n=e.document,r=e.fallbackRenderer,i=e.getPdfUrl,o=t.state.currentPage,window.Worker){u.next=5;break}return r({reason:"Workers are not supported"}),u.abrupt("return");case 5:return u.prev=5,u.next=8,a.a.awrap(i({document:n}));case 8:return s=u.sent,u.next=11,a.a.awrap(t.loadPdf(s));case 11:c=u.sent,o>c.numPages&&(o=c.numPages),t.props.onPaginationChange({currentPage:o-1,totalPagesCount:c.numPages}),t.setState({pdf:c,currentPage:o},(function(){t.renderPage(o)})),u.next=20;break;case 17:u.prev=17,u.t0=u.catch(5),"RenderingTimeoutError"===u.t0.name?r({reason:"Rendering timeout exceeded"}):(r({reason:"Runtime error",message:u.t0.toString()}),g.a.log(u.t0));case 20:case"end":return u.stop()}}),null,null,[[5,17]])},t.loadPdf=function(e){return P.a.getDocument(e).promise},t.setCanvasSize=function(e){var n=e.width,r=e.height,a=t.primaryCanvas.current,i=t.secondaryCanvas.current;a.width=n,a.height=r,i.width=n,i.height=r},t.primaryCanvas=o.a.createRef(),t.secondaryCanvas=o.a.createRef(),t.isBusy=!1,t.isPending=!1,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){h.a.on(h.a.RESUME_PREVIEW_RELOAD_EVENT,this.listener),this.renderPdf()},i.componentDidUpdate=function(e){!e.document&&this.props.document&&this.renderPdf()},i.componentWillUnmount=function(){clearTimeout(this.renderingTimeoutId),h.a.removeListener(h.a.RESUME_PREVIEW_RELOAD_EVENT,this.listener)},i.renderPage=function(e){var t=this;if(this.isBusy)this.isPending=!0;else{this.isBusy=!0;var n=this.props,r=n.width,a=n.onPageRender,i=this.state.pdf;i&&i.getPage(e).then((function(e){var n=e.getViewport(1),a=r*w/n.width,i=e.getViewport(a);t.state.canvasWidth!==i.width&&t.setCanvasSize(i),t.setState({canvasWidth:i.width,lastRenderedWidth:r});var o=t.primaryCanvas.current,s=t.secondaryCanvas.current,c="primary"===t.state.activeLayer?s:o;return e.render({canvasContext:c.getContext("2d"),viewport:i}).promise})).then((function(){var e="primary"===t.state.activeLayer?"secondary":"primary";t.setState({activeLayer:e}),a&&a(),t.isBusy=!1,t.isPending&&t.renderPage(t.state.currentPage),t.isPending=!1})).catch((function(e){return g.a.log(e)}))}},i.nextPage=function(){var e=this,t=this.state,n=t.currentPage,r=t.pdf,a=n+1;this.props.onPaginationChange({currentPage:a-1,totalPagesCount:r.numPages}),this.setState({currentPage:a},(function(){e.renderPage(a)}))},i.previousPage=function(){var e=this,t=this.state,n=t.currentPage,r=t.pdf,a=n-1;this.props.onPaginationChange({currentPage:a-1,totalPagesCount:r.numPages}),this.setState({currentPage:a},(function(){e.renderPage(a)}))},i.reset=function(){var e=this,t=this.state.pdf;this.props.onPaginationChange({currentPage:0,totalPagesCount:t.numPages}),this.setState({currentPage:1},(function(){e.renderPage(1)}))},i.resize=function(){var e=this.props.width,t=this.state,n=t.currentPage;e-t.lastRenderedWidth>50&&this.renderPage(n)},i.render=function(){var e=this.props.width,t=this.state,n=t.canvasWidth,r=t.activeLayer,a=e/n;return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.d,{ref:this.primaryCanvas,ratio:a,visible:"primary"===r}),o.a.createElement(l.e,{ref:this.secondaryCanvas,ratio:a,visible:"secondary"===r}))},r}(i.Component);y.propTypes={width:c.a.number,height:c.a.number,document:c.a.object,onPaginationChange:c.a.func,onPageRender:c.a.func,getPdfUrl:c.a.func.isRequired,fallbackRenderer:c.a.func};t.default=Object(u.connect)(null,(function(e){return{fallbackRenderer:function(t){return e(d.a.fallback(t))},getPdfUrl:Object(p.a)(e,d.a.fetchClientPreview)}}),null,{forwardRef:!0})(y)}}]);